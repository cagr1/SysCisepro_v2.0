<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard</title>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />

    <!-- eCharts -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.6.0/dist/echarts.min.js"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/wwwroot/css/app.css" />
</head>

<body class="bg-gray-100 min-h-screen flex" style="background: #f3f3f3">
    <!-- Sidebar -->

    <aside
        class="fixed left-0 top-0 h-screen w-20 hover:w-64 glass-sidebar sidebar-gradient shadow-xl transition-all duration-300 ease-in-out z-40 group bg-clip-border rounded-r-xl"
        id="sidebar">
        <!-- Encabezado -->

        <!-- <div class="mt-16 px-2 space-y-2"> -->

        <div class="mt-16 px-2">
            <button id="sidebarToggle"
                class="flex items-center h-12 p-2 w-full hover:bg-blue-50 rounded-lg relative overflow-hidden">
                <span class="min-w-[2rem] text-center absolute left-2">
                    <svg id="toggleIcon" class="w-5 h-5 text-gray-900" viewBox="0 0 32 32" fill="currentColor">
                        <path
                            d="M16.642 20.669c-0.391 0.39-0.391 1.023-0 1.414 0.195 0.195 0.451 0.293 0.707 0.293s0.512-0.098 0.707-0.293l5.907-6.063-5.907-6.063c-0.39-0.39-1.023-0.39-1.414 0s-0.391 1.024 0 1.414l3.617 3.617h-19.264c-0.552 0-1 0.448-1 1s0.448 1 1 1h19.326zM30.005 0h-18c-1.105 0-2.001 0.895-2.001 2v9h2.014v-7.78c0-0.668 0.542-1.21 1.21-1.21h15.522c0.669 0 1.21 0.542 1.21 1.21l0.032 25.572c0 0.668-0.541 1.21-1.21 1.21h-15.553c-0.668 0-1.21-0.542-1.21-1.21v-7.824l-2.014 0.003v9.030c0 1.105 0.896 2 2.001 2h18c1.105 0 2-0.895 2-2v-28c-0.001-1.105-0.896-2-2-2z" />
                    </svg>
                </span>
            </button>
        </div>
        
        <div class="px-2 space-y-2">
            <a href="#"
                class="flex items-center h-12 p-2 text-gray-700 hover:bg-blue-50 rounded-lg relative overflow-hidden">
                <span class="min-w-[2rem] text-center absolute left-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                    </svg>
                </span>
                <span
                    class="menu-text whitespace-nowrap ml-10 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                    Ingresos/Egresos
                </span>
            </a>

            <a href="#"
                class="flex items-center h-12 p-2 text-gray-700 hover:bg-blue-50 rounded-lg relative overflow-hidden">
                <span class="min-w-[2rem] text-center absolute left-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </span>
                <span
                    class="menu-text whitespace-nowrap ml-10 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                    Activos/Pasivos
                </span>
            </a>

            <a href="#"
                class="flex items-center h-12 p-2 text-gray-700 hover:bg-blue-50 rounded-lg relative overflow-hidden">
                <span class="min-w-[2rem] text-center absolute left-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                    </svg>
                </span>
                <span
                    class="menu-text whitespace-nowrap ml-10 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                    Balance Final
                </span>
            </a>
        </div>

        <!-- </div> -->
    </aside>

    <div class="flex-1 flex flex-col ml-20 transition-all duration-300" id="mainContent">
        <!-- <div class=" bg-white p-4 mx-4 mt-4 items-center rounded-lg  shadow-sm  border-gray-100">
                 <div class="logo font-bold text-gray-700 text-lg text-center ">PANEL FINANCIERO</div>
            </div> -->

        <main class="pt-4 px-4">
            <div class="mb-8 bg-white p-4 rounded-lg shadow-sm">
                <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                    <div class="md:flex-1 ml-10">
                        <h1 class="text-xl font-bold text-gray-900">PANEL FINANCIERO</h1>
                    </div>
                    <div class="flex flex-col md:flex-row gap-4 md:items-center md:flex-[2]">
                        <div class="flex-1 flex flex-col md:flex-row gap-3 items-start md:items-center">
                            <!-- Input Fecha Inicio -->
                            <div class="w-full md:w-auto">
                                <label class="block text-sm font-medium text-gray-700 mb-1">Fecha Inicial</label>
                                <input type="date" id="startDate"
                                    class="w-full md:w-[160px] p-1.5 border rounded-md focus:ring-2 focus:ring-blue-500 text-sm" />
                            </div>

                            <!-- Input Fecha Fin -->
                            <div class="w-full md:w-auto">
                                <label class="block text-sm font-medium text-gray-700 mb-1">Fecha Final</label>
                                <input type="date" id="endDate"
                                    class="w-full md:w-[160px] p-1.5 border rounded-md focus:ring-2 focus:ring-blue-500 text-sm" />
                            </div>
                        </div>

                        <div class="md:self-end">
                                <button onclick="loadData()" 
                                    class="bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white px-4 py-2.5 rounded-md text-sm font-medium shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-0.5 focus:ring-2 focus:ring-blue-300 focus:outline-none flex items-center">
                                
                                    <!-- SVG corregido -->
                                    <svg class="w-5 h-5 mr-2 self-center" viewBox="0 0 24 24" fill="currentColor" style="display: block; transform: translateY(1px);">
                                        <path fill-rule="evenodd" 
                                            clip-rule="evenodd" 
                                            d="M1.85 7.5C1.85 4.66 4.06 1.85 7.5 1.85c2.78 0 4.15 2.06 4.74 3.15H10.5a.5.5 0 0 0 0 1h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-1 0v1.81C12.3 3.07 10.67.85 7.5.85 3.44.85.85 4.19.85 7.5S3.44 14.15 7.5 14.15c1.94 0 3.56-.77 4.71-1.94.62-.63 1.1-1.37 1.43-2.17.1-.25-.02-.55-.27-.66-.25-.1-.54.02-.65.27-.28.68-.69 1.31-1.21 1.84-.97.99-2.34 1.65-4 1.65-3.44 0-5.65-2.81-5.65-5.65z"/>
                                    </svg>
                                
                                    Actualizar
                                </button>
                        </div>
                    </div>

                 
                </div>
            </div>

            <div class="cards-container">
                <!-- Card Ventas Netas -->
                <div class="data-card ingresos">
                    <div class="card-title">VENTA ACTUAL</div>
                    <div class="card-main-value" id="ventasRango">$$$</div>
                    <div class="card-secondary-info">
                    <div class="card-acumulado" id="ventasAcumuladas">  $49.9M  </div>
                        <div class="card-variacion positive" id="porcentajeVentasActual">+10%</div>
                    </div>
                    <div class="card-divider"></div>
                    <div class="card-meta">
                        <span class="card-year card-year-actual" >2025</span>
                    </div>
                </div>
                <div class="data-card ingresos">
                    <div class="card-title">VENTA ANTERIOR</div>
                    <div class="card-main-value" id="ventasRangoPrevious">$$$</div>
                    <div class="card-secondary-info">
                        <div class="card-acumulado" id="ventasAcumuladasPrevious"> $49.9M </div>
                        <div class="card-variacion positive" id="porcentajeVentasPrevio" >+10%</div>
                    </div>
                    

                    <div class="card-divider"></div>
                    <div class="card-meta">
                        <span class="card-year card-year-previous" >2024</span>
                    </div>
                </div>
               
                
                <!-- <div class="data-card egresos">
                    <div class="card-title">GASTOS</div>
                    <div class="card-main-value" id="ventasRango">$9.8M</div>
                    <div class="card-acumulado" id="ventasAcumuladas">
                        $49.9M acumulado
                    </div>
                    <div class="card-divider"></div>
                    <div class="card-meta">
                        <span class="card-year">2025</span>
                    </div>
                </div> -->

                <!-- Utilidad -->
                <!-- <div class="data-card utilidad">
                    <div class="card-title">UTLIDADES</div>
                    <div class="card-main-value" id="ventasRango">$9.8M</div>
                    <div class="card-acumulado" id="ventasAcumuladas">
                        $49.9M acumulado
                    </div>
                    <div class="card-divider"></div>
                </div> -->
                <!-- Patrimonio -->
                <div class="data-card patrimonio">
                    <div class="card-title">Utilidades</div>
                    <div class="card-main-value" id="utilidadesActuales">$9.8M</div>
                    <div class="card-secondary-info">
                        <div class="card-acumulado" id="utilidadesAcumuladas"> $49.9M acumulado </div>
                        <div class="card-variacion positive" id="porcentajeUtilidades" ></div>
                    </div>
                    <div class="card-divider"></div>
                    <div class="card-meta">
                        <span class="card-year card-year-actual">2025</span>
                    </div>
                </div>

                <div class="data-card margen">
                    <div class="card-title">MARGEN NETO</div>
                    <div class="card-main-value" id="margenUtilidadNeta">14.8%</div>
                    <div class="card-secondary-info">
                        <div class="card-acumulado">Meta: 50.00%</div>
                        <div class="card-variacion positive" id="variacionMargen">+0.8%</div>
                    </div>
                    <div class="card-divider"></div>
                    <div class="card-meta">
                        <span class="card-year card-year-actual">2024</span>
                    </div>
                </div>
            </div>
             <!-- Sección de Gráficos -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-8 ">
            <!-- Contenedor Gráfico Financiero -->
            <div class="bg-white p-4 rounded-lg shadow-sm">
                <h3 class="text-lg font-semibold mb-4 text-center">Ingresos, Egresos y Utilidades</h3>
                <div id="financialChart" style="width: 100%; height: 400px;"></div>
            </div>

            <!-- Contenedor para otro gráfico (lo dejamos vacío por ahora) -->
            <div class="bg-white p-4 rounded-lg shadow-sm">
                <h3 class="text-lg font-semibold mb-4 text-center">Ventas por Categoria</h3>
                <div class="chart-container" style="height: 350px">
                    <div id="salesChart" style="width: 100%; height: 400px;"></div>
                </div>
            </div>
        </div>
        <div class="mt-8"></div>

        <div class="cards-container mb-8">
            <div class="data-card liquidez">
                <div class="card-title">LIQUIDEZ</div>
                <div class="card-main-value" id="liquidezCorriente">2.4x</div>
                <div class="card-secondary-info">
                    <div class="card-acumulado">Óptimo: 1.5</div>
                    <div class="card-variacion negative" id="variacionLiquidez">-0.2x</div>
                </div>
                <div class="card-divider"></div>
                <div class="card-meta">
                    <span class="card-year card-year-actual">2024</span>
                </div>
            </div>
            
            <!-- Endeudamiento -->
            <div class="data-card endeudamiento">
                <div class="card-title">ENDEUDAMIENTO</div>
                <div class="card-main-value" id="endeudamiento">38%</div>
                <div class="card-secondary-info">
                    <div class="card-acumulado">Límite: 40%</div>
                    <div class="card-variacion positive">-2%</div>
                </div>
                <div class="card-divider"></div>
                <div class="card-meta">
                    <span class="card-year card-year-actual">2024</span>
                </div>
            </div>
            
            <!-- Eficiencia Operativa -->
            <div class="data-card eficiencia">
                <div class="card-title">EFICIENCIA OP.</div>
                <div class="card-main-value" id="eficienciaOperativa">65%</div>
                <div class="card-secondary-info">
                    <div class="card-acumulado">Mejora: 5%</div>
                    <div class="card-variacion positive">+3%</div>
                </div>
                <div class="card-divider"></div>
                <div class="card-meta">
                    <span class="card-year card-year-actual">2024</span>
                </div>
            </div>
            
            <!-- Rentabilidad Patrimonio -->
            <div class="data-card rentabilidad">
                <div class="card-title">RENTAB. PATRIM.</div>
                <div class="card-main-value" id="rentabilidadPatrimonio">22%</div>
                <div class="card-secondary-info">
                    <div class="card-acumulado">Sector: 18%</div>
                    <div class="card-variacion positive">+4%</div>
                </div>
                <div class="card-divider"></div>
                <div class="card-meta">
                    <span class="card-year card-year-actual">2024</span>
                </div>
            </div>
        </div>



        </main>
    </div>

    <script src="/wwwroot/js/app.js"></script>
    <script src="/wwwroot/js/chart.js"></script>
    
</body>

</html>